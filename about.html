<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>About Us - Sales History</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styleitems.css">
    <style>
        .container { max-width:1100px; margin:20px auto; padding:16px;margin-bottom: 40px;}
        table { width:100%; border-collapse: collapse; border: 1px solid #cfe2ff; background: #fff; }
        th,td { padding:8px 10px; border:1px solid #cfe2ff; text-align:left; }
        th { background: #0b5ed7; color: #fff; font-weight:600; }
        tbody tr:nth-child(odd) { background: #e7f1ff; }
        tbody tr:hover { background: #d0e7ff; }
        td{color:black;font-weight:500;}
        td:last-child { text-align:right; color:#0b5ed7; font-weight:700; }
        .controls { margin-bottom:12px; display:flex; gap:8px;}
        /* style action buttons to match theme */
        .button-18 { background: #0b5ed7; color: #fff; border: none; padding:8px 12px; border-radius:6px; cursor:pointer; }
        .button-18:hover { background:#094bb0; }
            /* allow scrolling but hide the visible scrollbar */
            #historyContainer { max-height: calc(100vh - 240px); overflow: auto; -ms-overflow-style: none; scrollbar-width: none; }
            #historyContainer::-webkit-scrollbar { display: none; width: 0; height: 0; }
        .datas{
            max-height: calc(100vh - 200px);
            overflow-y: auto;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="top-bar">
        <button id="menuToggle" type="button" aria-expanded="false" aria-controls="drawer" aria-label="Open menu">‚ò∞</button>
        <div class="title">Moon Light Ice Cream Parlor</div>
    </div>

    <div class="drawer" id="drawer">
        <a href="index.html">Home</a>
        <a href="salesSummary.html">Sales Summary</a>
        <a href="about.html">About Us</a>
    </div>

    <div class="container">
        <h2 style="text-align: center;">Saved Sales Records</h2>
        <br>
        <div class="controls">
            <button id="backBtn" class="button-18">‚¨ÖÔ∏è Back</button>
            <button id="clearBtn" class="button-18">üóëÔ∏è Clear Records</button>
        </div>
        <br>
        <div id="historyContainer" class="datas">
            <table id="historyTable">
                <thead>
                    <tr><th>S.No</th><th>Date</th><th>Time</th><th>Sales Total (‚Çπ)</th></tr>
                </thead>
                <tbody></tbody>
            </table>
            <br>
            <br>
        </div>
        <br>
    </div>

    <script>
        (function () {
            const drawer = document.getElementById('drawer');
            const menuToggle = document.getElementById('menuToggle');
            if (!drawer || !menuToggle) return;
            menuToggle.addEventListener('click', (e) => {
                e.stopPropagation();
                const isOpen = drawer.classList.toggle('open');
                menuToggle.setAttribute('aria-expanded', String(isOpen));
            });
            document.addEventListener('click', () => {
                if (drawer.classList.contains('open')) {
                    drawer.classList.remove('open');
                    menuToggle.setAttribute('aria-expanded', 'false');
                }
            });
            drawer.addEventListener('click', (e) => e.stopPropagation());
        })();

        function renderHistory() {
            const key = 'sales_endings';
            const raw = localStorage.getItem(key);
            const tbody = document.querySelector('#historyTable tbody');
            tbody.innerHTML = '';
            if (!raw) {
                const tr = document.createElement('tr');
                tr.innerHTML = '<td colspan="4">No records found.</td>';
                tbody.appendChild(tr);
                return;
            }
            let arr = [];
            try { arr = JSON.parse(raw); } catch (e) { arr = []; }
            if (!arr.length) {
                const tr = document.createElement('tr');
                tr.innerHTML = '<td colspan="4">No records found.</td>';
                tbody.appendChild(tr);
                return;
            }
            // show oldest first with serial numbers
            arr.forEach((rec, idx) => {
                const d = new Date(rec.timestamp);
                const date = d.toLocaleDateString();
                const time = d.toLocaleTimeString();
                const tr = document.createElement('tr');
                const total = Number(rec.total) || 0;
                tr.innerHTML = `<td>${idx + 1}</td><td>${date}</td><td>${time}</td><td style="text-align:right">${total.toFixed(2)}</td>`;
                tbody.appendChild(tr);
            });
        }

        document.getElementById('backBtn').addEventListener('click', () => { window.history.back(); });
        document.getElementById('clearBtn').addEventListener('click', () => {
            if (!confirm('Clear all saved end-of-sales records?')) return;
            localStorage.removeItem('sales_endings');
            renderHistory();
        });

        renderHistory();
    </script>
</body>
</html>
